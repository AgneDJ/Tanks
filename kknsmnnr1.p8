pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
--variables
player={    --the player table
	x=13*8,      --key for the x
	y=27*8,
	x1=0,
	x2=8,
	y1=0,
	y2=8,
	s1=64,
	s2=65,
	s3=80,
	s4=81,
	h=2,       --key for the y
	} 

-->8
--draw
function _draw()
	cls()
	map(0,0,0,0,128,128)
	poke(0x5f2c,0)
	draw_player()
	camera(player.x-55,player.y-55)
end

function draw_player()
		spr(player.s1,player.x,player.y)
		spr(player.s2,player.x+8,player.y)
		spr(player.s3,player.x,player.y+8)
		spr(player.s4,player.x+8,player.y+8)
end

function draw_tile()
	for i=0,8 do
	spr(1+i,20+i*10,60)
	end
	for i=0,6 do
	spr(73+i,20+i*10,60)
	end
end
-->8
--update
function _update()
	if btn(0) then player.x-=1 player.s1=70 player.s2=71 player.s3=86 player.s4=87 end
	if btn(1) then player.x+=1 player.s1=66 player.s2=67 player.s3=82 player.s4=83 end
	if btn(2) then player.y-=1 player.s1=72 player.s2=73 player.s3=88 player.s4=89 end
	if btn(3) then player.y+=1 player.s1=68 player.s2=69 player.s3=84 player.s4=85 end
	
	local previousx=player.x
	local previousy=player.y
	
	if tilecollision(player) then
		player.x=previousx
			player.y=previousy
		end

end


-->8
--collision

function tilecollision(object,flag)
	local flag=flag or 0
	local id1=mget((object.x1+object.x)/8,(object.y1+object.y)/8)
	local id2=mget((object.x1+object.x)/8,(object.y2+object.y)/8)
	local id3=mget((object.x2+object.x)/8,(object.y1+object.y)/8)
	local id4=mget((object.x2+object.x)/8,(object.y2+object.y)/8)
	
	if fget(id1,flag)==true or
				fget(id2,flag)==true or
				fget(id3,flag)==true or
				fget(id4,flag)==true then
				return true
	end	
	return false
end

function collision(object1,object2,priviouslyx,previouslyy)
	if object1.x2+object1.x<=object2.x1+object2.x or
				object1.x1+object1.x>=object2.x2+object2.x or
				object1.y2+object1.y<=object2.y1+object2.y	or
				object1.y1+object1.y>=object2.y2+object2.y then
				return false
	end
	return true
end	
__gfx__
00000000444454446666666565111111111111116666666666666675666666660000000000000000000000000000000000000000000000000000000000000000
00000000888858886777775511111651111111656666666666666756666667660007777600077000777770000766666000000007700000000000000000000000
00700700888858886777775511561111156111116666666666667566666675660076666600766600666666000766666000027072270720000000000000000000
000770005555555567777755111111561111651166666666666756666667566607666666076666606666666007666660002a27288272a2000009000990009000
00077000544444446777775565165111651111116666666666756666667566660766666607666660666666600766666000728228822827000000900990090000
0070070054888888677777551111111111156156666666666756666667566666007666660766666066666600076666600007279999727000000009aaaa900000
0000000054888888655555551561116511111111666666667566666666666666000666660766666066666000007666000072299aa992270000000aa77aa00000
000000005555555555555555111111116511165166666666566666666666666600000000066666600000000000076000072889a77a98827000099a7777a99000
0333bb3000000000000000000000000000000000000000000000000000000000000000000333bb300000000000000000072889a77a98827000099a7777a99000
33b33bb3000000000000000000000000000000000000000000000000000000000000000033b33bb300000000000000000072299aa992270000000aa77aa00000
3b33bb3b00000000000000000000000000000000000000000000000000000000000000003b33bb3b00000000000000000007279999727000000009aaaa900000
bb3bb3330000000000000000000000000000000000000000000000000000000000000000bb3bb333000000000000000000728228822827000000900990090000
33bb3bbb000000000000000000000000000000000000000000000000000000000000000033bb3bbb0000000000000000002a27288272a2000009000990009000
3bb3bb3300000000000000000000000000000000000000000000000000000000000000003bb3bb33000000000000000000027072270720000000000000000000
33b333bb000000000000000000000000000000000000000000000000000000000000000033b333bb000000000000000000000007700000000000000000000000
03bb3b30000000000000000000000000000000000000000000000000000000000000000003bb3b30000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000550000000000005500000000000000000000000000000000
0000000a000000000a4a4a4a4a4a00000a990000000499000000a4a4a4a4a4a00000000a00000000055000000000055000000010000000000000000000000000
0000000a000000000949494949490000044a04444404440000009494949494900000000a00000000555500555000555500000001000000000000000000000000
0a99000a000a990009aaaaaaaaa900000a9a4aa99944990000009aaaaaaaaa900a99000a000a9900005550059505550000000001100000000000000000000000
044a000a000444000004aaaaa0000000044aaa94499444000000000aaaaa4000044a000a00044400555550055005555500000001110000000000000000000000
0a9a0a9a44049900004aa999aa0000000a9aa9a949949900000000aa999aa4000a9a0a9a44049900005555555555550000000101101000000000000000000000
044aaa9999444400004a9aaa99000000044aa9a94994440000000099aaa9a400044aaa9999444400055555555555555000001111111100000000000000000000
0a9aa9aa999499000049499a9aaaaa000a9aa9aa9994990000aaaaa9a99494000a9aa9aa99949900559559555595595500011811111110000000000000000000
044aa9a9499444000049444994000000044aaa99994444000000004994449400044aa9a949944400055955555555955000011181181110000000000000000000
0a9aa9a94994990000499999940000000a9a0a9a4404990000000049999994000a9aa9a949949900055555055055555000011118118110000000000000000000
044aaa94499444000004999940000000044a000a000444000000000499994000044aaa9449944400005555055055550000011111111810000000000000000000
0a9a4aa99944990004444444444a00000a99000a000a99000000a444444444400a9a4aa999449900000550055005500000011111111110000000000000000000
044a04444404440009494949494900000000000a000000000000949494949490044a044444044400000000055000000000011101101110000000000000000000
0a9900000004990009494949494900000000000a0000000000009494949494900a99000000049900000050555505000000001111111100000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000055055055000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000b000000000b5b5b5b5b5b00000b330000000533000000b5b5b5b5b5b00000000b00000000000000000000000000000000000000000000000000000000
0000000b000000000353535353530000055b55555555550000003535353535300000000b00000000000000000000000000000000000000000000000000000000
0b33000b000b330003bbbbbbbbb300000b3bbbb33355330000003bbbbbbbbb300b33000b000b3300000000000000000000000000000000000000000000000000
055b000b00055500005bbbbbb5000000055bbb35533555000000005bbbbbb500055b000b00055500000000000000000000000000000000000000000000000000
0b3b5b3b55553300005bb333bb0000000b3bb3b353353300000000bb333bb5000b3b5b3b55553300000000000000000000000000000000000000000000000000
055bbb3333555500005b3bbb33000000055bb3b35335550000000033bbb3b500055bbb3333555500000000000000000000000000000000000000000000000000
0b3bb3bb333533000053533b3bbbbb000b3bb3bb3335330000bbbbb3b33535000b3bb3bb33353300000000000000000000000000000000000000000000000000
055bb3b3533555000053555335000000055bbb33335555000000005335553500055bb3b353355500000000000000000000000000000000000000000000000000
0b3bb3b35335330000533333350000000b3b5b3b5555330000000053333335000b3bb3b353353300000000000000000000000000000000000000000000000000
055bbb35533555000055333355000000055b000b000555000000005533335500055bbb3553355500000000000000000000000000000000000000000000000000
0b3bbbb33335330005555555555b00000b33000b000b33000000b555555555500b3bbbb333553300000000000000000000000000000000000000000000000000
055b55555555550003535353535300000000000b000000000000353535353530055b555555555500000000000000000000000000000000000000000000000000
0b3300000005330003535353535300000000000b0000000000003535353535300b33000000053300000000000000000000000000000000000000000000000000
__gff__
0001020404201010000000000000000008000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
1010101010101010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010000000000000000000000000000000000000000000000000000000000012101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
10107a0000000000000000000000000000000000000000000000000000000012101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
10107a247a2401010000010100000101000001010000010100000101007a7a12101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
10107a007a0001019c9c010100000101000001010000010100000101007a7a12101010101010121200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
10107a007a0001019c9c01019c9c010100000101000001010000010100000012101010101010121200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
10107a7a7a7a01019c9c0101009c01017a7a01017a7a01017a7a010100000012101010101010121200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
10107a7a7a7a01017a7a01017a0001010202010100000101007a010100000012101010101010001200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
10107a7a7a7a01017a000101000001010202010100000101000001017a7a0000101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
10107a7a7a7a010100000101000001010000010100000101000001017a7a0000101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
10107a7a7a7a0101000001010000131300001313000001010000010100000000101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
10107a7a7a7a0101000001010000131300001313007a0101000001017a7a0000101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
10107a337a333333000033330000010100000101007a33330000333300000000101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
101017177a000000000000000000010100000101000000000000000000000000101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010171701013333010101010000141400141414000001010101000001010000101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010001702020000010101010000000000000000000001010101000002020000101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010001700000000000000000000010100000101000026000000000000000000101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010001700000000000000000000010101010101000026260000000000000000101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010000000000101242401010000010101010101000001010000010100000000101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010000000000101000001010000010100000101000001010000010100000000101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
10100000000001010000010100000101000001010000010100000101007a0000101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
101000000000010100000101000001010000010100000101000001017a7a0000101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
101000000000010100000101000001010000010100000101000001017a7a0000101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
101000000000010100000101000000000000000000000101000001017a7a0000101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
101000000000010100000101000000000000000000000101000001017a7a0000101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
101000000000010100000101000000010101010000000101000001017a000000101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
101000000000000000000000000000014a4b0100000000000000000000000000101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
101000000000000000000000000000015a5b0100000000000000007a00000000101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000007a7a00000000000000000000007a7a7a007a00000000000000127a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
